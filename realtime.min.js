"use strict";function Realtime(sock,auth=null){let onError=null,onConnected=null,onDisconnected=null,onWhoami=null,onWhois=null,onUsers=null,onJoin=null,onLeave=null,onMessage=null,onRooms=null,onRoom=null,onChat=null,onAuth=null,onAll=null;return sock.onState(s=>{"connected"===s&&(onConnected&&"function"==typeof onConnected&&onConnected({type:"connected"}),onAll&&"function"==typeof onAll&&onAll({type:"connected"})),"disconnected"===s&&(onDisconnected&&"function"==typeof onDisconnected&&onDisconnected({type:"disconnected"}),onAll&&"function"==typeof onAll&&onAll({type:"disconnected"}))}),sock.onError(err=>{onError&&"function"==typeof onError&&onError({error:err}),onAll&&"function"==typeof onAll&&onAll({error:err})}),sock.onMessage(async m=>{"whoami"===m.type&&onWhoami&&"function"==typeof onWhoami&&onWhoami(m),"whois"===m.type&&onWhois&&"function"==typeof onWhois&&onWhois(m),"users"===m.type&&onUsers&&"function"==typeof onUsers&&onUsers(m),"rooms"===m.type&&onRooms&&"function"==typeof onRooms&&onRooms(m),"room"===m.type&&onRoom&&"function"==typeof onRoom&&onRoom(m),"message"===m.type&&onMessage&&"function"==typeof onMessage&&onMessage(m),"chat"===m.type&&onChat&&"function"==typeof onChat&&onChat(m),"join"===m.type&&onJoin&&"function"==typeof onJoin&&onJoin(m),"leave"===m.type&&onLeave&&"function"==typeof onLeave&&onLeave(m),"auth"===m.type&&onAuth&&"function"==typeof onAuth&&onAuth(m),onAll&&"function"==typeof onAll&&onAll(m)}),{onWhoami:cb=>{onWhoami=cb},onWhois:cb=>{onWhois=cb},onUsers:cb=>{onUsers=cb},onJoin:cb=>{onJoin=cb},onLeave:cb=>{onLeave=cb},onRoom:cb=>{onRoom=cb},onRooms:cb=>{onRooms=cb},onChat:cb=>{onChat=cb},onMessage:cb=>{onMessage=cb},onAuth:cb=>{onAuth=cb},onAll:cb=>{onAll=cb},onConnected:cb=>{onConnected=cb},onDisconnected:cb=>{onDisconnected=cb},onError:cb=>{onError=cb},connect:()=>{sock.connect()},close:()=>{sock.close()},whoami:()=>{sock.send({type:"whoami"})},whois:(username=null,id=null)=>{sock.send({type:"whois",username:username,id:id})},join:room=>{sock.send({type:"join",room:room})},leave:room=>{sock.send({type:"leave",room:room})},chat:(room,message)=>{sock.send({type:"chat",room:room,chat:message})},message:(to,message)=>{sock.send({type:"message",to:to,message:message})},users:()=>{sock.send({type:"users"})},rooms:()=>{sock.send({type:"rooms"})},room:room=>{sock.send({type:"room",room:room})},auth:async()=>{auth&&sock.send({type:"auth",token:await auth.getToken()})},sock:sock}}